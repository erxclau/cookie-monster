import"./modulepreload-polyfill.c7c6310f.js";import{_ as L,p as k}from"./pym.v1.e4649dc4.js";import{$ as s,g as P,u as O,d as _}from"./util.82aea728.js";window.onload=async()=>{var b;const l=s("#graphic"),n=P(),p=(e,t)=>{n.set(e,t),O(n)},{entries:d}=await L(()=>import("./config.4ab5e6f6.js"),[]),h=Object.keys(d);let r=(b=n.get("entry"))!=null?b:h[0];Object.hasOwn(d,r)||(r=h[0],p("entry",r));const g=s("#view-raw"),o=s("#url-input"),m=s("#copy-url-button");let i;const u=(e,t={})=>{let a="";Object.keys(t).length>0&&(a=`?${new URLSearchParams(t).toString()}`),g.href=`graphic/${e}${a}`,o.value=g.href,o.size=o.value.length,m.textContent="Copy",p("entry",e),r=e,i&&i.remove(),["hed","dek","note","source","byline"].forEach(E=>{s(`#${E}-checkbox`).disabled=!Object.hasOwn(d[e],E)}),i=new k.Parent("graphic",g.href,{})},y=Array.from(s(".options#display").children),v=()=>Object.fromEntries(y.filter(e=>n.has(e.name)).map(e=>[e.name,n.get(e.name)]));y.forEach(e=>{n.has(e.name)&&(e.checked=n.get(e.name)==="true"),e.addEventListener("change",({target:{name:t,checked:a}})=>{t==="home"&&!a||t!=="home"&&a?n.delete(t):(t==="home"&&a||t!=="home"&&!a)&&n.set(t,a),O(n),u(r,v())})}),u(r,v());const w=s("#entrypoint-select");h.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,e===r&&(t.selected=!0),w.appendChild(t)}),w.disabled=Object.keys(d).length<2,w.addEventListener("change",e=>{u(e.target.value,v())});const c=e=>{l.style.width=`${e}px`,p("width",e)};n.has("width")&&c(n.get("width")),new ResizeObserver(_(([e])=>{c(e.contentRect.width)})).observe(l),s("#desktop-preview").addEventListener("click",()=>{c(780)}),s("#small-mobile-preview").addEventListener("click",()=>{c(288)}),s("#large-mobile-preview").addEventListener("click",()=>{c(338)}),m.addEventListener("click",()=>{o.select(),o.setSelectionRange(0,o.value.length),document.execCommand("copy"),m.textContent="Copied!"});const f=e=>JSON.stringify({entry:r,format:e,width:l.clientWidth});s("#download-png").addEventListener("click",()=>{i.sendMessage("download",f("png"))}),s("#download-svg").addEventListener("click",()=>{i.sendMessage("download",f("svg"))})};
