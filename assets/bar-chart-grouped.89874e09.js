import"./modulepreload-polyfill.c7c6310f.js";/* empty css             */import"./graphic.b50f7b1c.js";import{p as k}from"./pym.v1.e4649dc4.js";import{s as m,d as $}from"./download-image.15bf44c5.js";import{c as u}from"./grouped.df1e3f00.js";import{V as z,s as L,r as R,b as W}from"./set-display.8240a882.js";import{w as G}from"./wrap.168604d1.js";import{x as M,a as V,l as X,b as y,m as w}from"./axis.be3035b7.js";import{b as f,o as B}from"./band.da707044.js";import"./util.82aea728.js";class D extends z{constructor(){super(),this.height(200),this.margin({top:20,right:20,bottom:20,left:20}),this.color("steelblue"),this.label(s=>s[1]),this.resize(!0),this.redraw(!1),this.wrappx(50),this.xAxis(M),this.yAxis(function(s){return t=>{this.getSelectionWithRedrawContext(t).call(V(s).tickSize(0))}}),this.x=X(),this.y0=null,this.y1=null}bar(s){return s.attr("class","bar").attr("y",t=>this.y1(t[0])).attr("height",this.y1.bandwidth()).attr("fill",this.color())}barLabel(s){return s.attr("class","label").attr("dx","0.25em").attr("y",t=>this.y1(t[0])+this.y1.bandwidth()/2).text(this.label())}defaultXScale(s){return y().domain([0,w(s,t=>w(Object.entries(t[1]),a=>+a[1]))]).nice()}draw(s){return s.each((t,a,o)=>{var x;const{top:p,right:A,bottom:S}=this.margin();let{left:n}=this.margin();const l=o[a],j=Object.keys(t.values().next().value);this.x.set(l,(x=this.xScale())!=null?x:this.defaultXScale(t)),this.y0=f().domain(t.keys()).range([p,this.height()-S]).padding(.3),this.y1=f().domain(j).range([0,this.y0.bandwidth()]);const h=m(l).attr("height",this.height()).attr("class","grouped-bar-chart");this.svg=h,this.appendOnce("g","y-axis").call(this.yAxis().bind(this)(this.y0)).call(i=>{const e=i.selectAll(".tick text");n=G(e,this.wrappx())+5}).attr("transform",`translate(${n}, 0)`);const v=this.appendOnce("g","x-axis").attr("transform",`translate(0, ${p})`),g=h.selectAll(".bar-group").data(t).join("g").attr("class","bar-group").attr("transform",i=>`translate(0, ${this.y0(i[0])})`),C=g.selectAll(".bar").data(i=>Object.entries(i[1])).join("rect").call(this.bar.bind(this)),O=g.selectAll(".label").data(i=>Object.entries(i[1])).join("text").call(this.barLabel.bind(this)),b=()=>{const i=this.getResponsiveWidth();h.attr("width",i);const e=this.x.get(l).range([n,i-A]);v.call(this.xAxis().bind(this)(e));const c=e.domain()[0];this.getSelectionWithRedrawContext(C).attr("x",e(c)).attr("width",d=>e(d[1])-e(c)),this.getSelectionWithRedrawContext(O).attr("x",d=>e(d[1]))};b(),m(window).on(`resize.${a}`,b)}),this}}const E=async()=>{const r=R(u,t=>Object.fromEntries(t.map(({Comfort:a,Percent:o})=>[a,o])),t=>t.Politics),s=B().domain(new Set(u.map(t=>t.Comfort))).range(["MediumSeaGreen","lightgreen","pink","LightCoral"]);m("figure").append("svg").datum(r).call(W(new D().height(500).color(s).xScale(y().domain([0,100])).label(t=>`${t[1]}%`)))};window.onresize=()=>{};window.onload=()=>{const r=new k.Child({polling:500});r.sendHeight(),r.onMessage("download",$),L(),E()};
