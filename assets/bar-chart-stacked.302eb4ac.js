import"./modulepreload-polyfill.c7c6310f.js";/* empty css             */import"./graphic.b50f7b1c.js";import{p as A}from"./pym.v1.e4649dc4.js";import{s as m,d as v}from"./download-image.15bf44c5.js";import{c as u}from"./grouped.df1e3f00.js";import{V as C,s as j,r as z,b as O}from"./set-display.8240a882.js";import{w as R}from"./wrap.168604d1.js";import{x as W,a as $,l as E,m as G,b as L}from"./axis.be3035b7.js";import{s as M,a as V}from"./stack.81967616.js";import{b as X,o as Y}from"./band.da707044.js";import"./util.82aea728.js";import"./array.a075a4a0.js";class B extends C{constructor(){super(),this.height(200),this.margin({top:20,right:20,bottom:20,left:20}),this.color("steelblue"),this.resize(!0),this.redraw(!1),this.wrappx(50),this.xAxis(W),this.yAxis(function(s){return t=>{this.getSelectionWithRedrawContext(t).call($(s).tickSize(0))}}),this.x=E(),this.y=null}defaultXScale(s){const t=G(s.values(),e=>M(this.keys.map(o=>e[o])));return L().domain([0,t])}defaultYScale(s){return X().domain(s.keys()).padding(.3)}draw(s){s.each((t,e,o)=>{var g,x;const{top:d,right:f,bottom:w}=this.margin();let{left:n}=this.margin();this.keys=Object.keys(t.values().next().value);const c=o[e];this.x.set(c,(g=this.xScale())!=null?g:this.defaultXScale(t)),this.y=(x=this.yScale())!=null?x:this.defaultYScale(t),this.y.range([d,this.height()-w]);const h=m(c).attr("height",this.height()).attr("class","stacked-bar-chart");this.svg=h,this.appendOnce("g","y-axis").call(this.yAxis().bind(this)(this.y)).call(a=>{const i=a.selectAll(".tick text");n=R(i,this.wrappx())+5}).attr("transform",`translate(${n}, 0)`);const y=this.appendOnce("g","x-axis").attr("transform",`translate(0, ${d})`),b=V().keys(this.keys)(t.values()),k=h.selectAll(".bar-group").data(b).join("g").attr("fill",this.color()).attr("class","bar-group").selectAll(".bar").data(a=>a).join("rect").attr("class","bar").attr("y",(a,i)=>this.y(Array.from(t.keys())[i])).attr("height",this.y.bandwidth()),p=()=>{const a=this.getResponsiveWidth();h.attr("width",a);const i=this.x.get(c).range([n,a-f]);y.call(this.xAxis().bind(this)(i)),this.getSelectionWithRedrawContext(k).attr("width",([l,S])=>i(S)-i(l)).attr("x",([l])=>i(l))};p(),m(window).on(`resize.${e}`,p)})}}const D=async()=>{const r=z(u,t=>Object.fromEntries(t.map(({Comfort:e,Percent:o})=>[e,o])),t=>t.Politics),s=Y().domain(new Set(u.map(t=>t.Comfort))).range(["MediumSeaGreen","lightgreen","pink","LightCoral"]);m("figure").append("svg").datum(r).call(t=>{console.time(),t.call(O(new B().color(({key:e})=>s(e)))),console.timeEnd()})};window.onresize=()=>{};window.onload=()=>{const r=new A.Child({polling:500});r.sendHeight(),r.onMessage("download",v),j(),D()};
