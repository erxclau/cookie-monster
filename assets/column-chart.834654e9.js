import"./modulepreload-polyfill.c7c6310f.js";/* empty css             */import{p as v}from"./pym.v1.e4649dc4.js";import{s as h,d as A}from"./download-image.15bf44c5.js";import{V as S,s as R,r as C,b as O}from"./set-display.8240a882.js";import{d as z}from"./2022-state.87e34ceb.js";import{c as D,y as L,l as W,b as $,m as j}from"./axis.be3035b7.js";import{b as k,o as B}from"./band.da707044.js";import{s as G}from"./color.467d371f.js";import"./util.82aea728.js";class M extends S{constructor(){super(),this.height(400),this.margin({top:20,right:20,bottom:40,left:30}),this.color("steelblue"),this.label(s=>s[1]),this.resize(!0),this.redraw(!1),this.wrappx(50),this.xAxis(D),this.yAxis(L),this.x=null,this.y=W()}bar(s){const i=this.y.get(this.svg.node()),t=i.domain()[0];return this.getSelectionWithRedrawContext(s).attr("class","bar").attr("y",a=>i(a[1])).attr("height",a=>i(t)-i(a[1])).attr("fill",this.color())}barLabel(s){const i=this.y.get(this.svg.node());return this.getSelectionWithRedrawContext(s).attr("class","label").attr("y",o=>i(o[1])).attr("dy","-0.25em").text(this.label())}defaultXScale(s){return k().domain(s.keys()).padding(.25)}defaultYScale(s){return $().domain([0,j(s.values())]).nice()}draw(s){s.each((i,t,o)=>{var g,p;const{top:a,right:b,bottom:c,left:d}=this.margin(),l=o[t];this.x=(g=this.xScale())!=null?g:this.defaultXScale(i),this.y.set(l,(p=this.yScale())!=null?p:this.defaultYScale(i)).range([this.height()-c,a]);const r=h(l).attr("height",this.height()).attr("class","column-chart");this.svg=r;const u=this.appendOnce("g","y-axis").attr("transform",`translate(${d}, 0)`),f=this.appendOnce("g","x-axis").attr("transform",`translate(0, ${this.height()-c})`),w=r.selectAll(".bar").data(i).join("rect").call(this.bar.bind(this)),y=r.selectAll(".label").data(i).join("text").call(this.barLabel.bind(this)),m=()=>{const x=this.getResponsiveWidth();r.attr("width",x),this.x.range([d,x-b]),f.call(this.xAxis().bind(this)(this.x)),u.call(this.yAxis().bind(this)(this.y.get(l))),w.attr("x",n=>this.x(n[0])).attr("width",this.x.bandwidth()),y.attr("x",n=>this.x(n[0])+this.x.bandwidth()/2)};m(),h(window).on(`resize.${t}`,m)})}}const N=()=>{const e=z.filter(t=>t["School Type"]==="District").map(t=>(t["Overall Rating"]==="Not Rated: Senate Bill 1365"&&(t["Overall Rating"]="Not Rated (D/F)"),t)),s=C(e,t=>t.length,t=>t["Overall Rating"]),i=B().domain(s.keys()).range(G.slice(0,s.size));h("figure").append("svg").datum(s).call(O(new M().wrappx(100).margin({left:50,right:50}).height(400).color(t=>i(t[0]))))};window.onresize=()=>{};window.onload=()=>{const e=new v.Child({polling:500});e.sendHeight(),e.onMessage("download",A),R(),N()};
