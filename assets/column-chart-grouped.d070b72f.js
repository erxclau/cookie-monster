import"./modulepreload-polyfill.c7c6310f.js";/* empty css             */import"./graphic.b50f7b1c.js";import{p as O}from"./pym.v1.e4649dc4.js";import{s as d,d as $}from"./download-image.15bf44c5.js";import{c as b}from"./grouped.df1e3f00.js";import{V as k,s as G,r as L,b as z}from"./set-display.8240a882.js";import{c as R,y as W,l as M,b as y,m as u}from"./axis.be3035b7.js";import{b as w,o as V}from"./band.da707044.js";import"./util.82aea728.js";class Y extends k{constructor(){super(),this.height(400),this.margin({top:20,right:20,bottom:40,left:30}),this.color("steelblue"),this.label(s=>s[1]),this.resize(!0),this.redraw(!1),this.wrappx(50),this.xAxis(R),this.yAxis(W),this.y=M(),this.x0=null,this.x1=null}bar(s){const t=this.y.get(this.svg.node()),i=t.domain()[0];return this.getSelectionWithRedrawContext(s).attr("class","bar").attr("y",r=>t(r[1])).attr("height",r=>t(i)-t(r[1])).attr("fill",this.color())}barLabel(s){const t=this.y.get(this.svg.node());return this.getSelectionWithRedrawContext(s).attr("class","label").attr("y",e=>t(e[1])).attr("dy","-0.25em").text(this.label())}defaultYScale(s){return y().domain([0,u(s,t=>u(Object.entries(t[1]),i=>+i[1]))]).nice()}draw(s){s.each((t,i,e)=>{var p;const{top:r,right:f,bottom:m,left:g}=this.margin(),l=e[i],A=Object.keys(t.values().next().value);this.x0=w().domain(t.keys()).padding(.3),this.x1=w().domain(A),this.y.set(l,(p=this.yScale())!=null?p:this.defaultYScale(t)).range([this.height()-m,r]);const h=d(l).attr("height",this.height()).attr("class","grouped-column-chart");this.svg=h;const v=this.appendOnce("g","y-axis").attr("transform",`translate(${g}, 0)`),j=this.appendOnce("g","x-axis").attr("transform",`translate(0, ${this.height()-m})`),c=h.selectAll(".bar-group").data(t).join("g").attr("class","bar-group"),S=c.selectAll(".bar").data(a=>Object.entries(a[1])).join("rect").call(this.bar.bind(this)),C=c.selectAll(".label").data(a=>Object.entries(a[1])).join("text").call(this.barLabel.bind(this)),x=()=>{const a=this.getResponsiveWidth();h.attr("width",a),this.x0.range([g,a-f]),this.x1.range([0,this.x0.bandwidth()]),j.call(this.xAxis().bind(this)(this.x0)),v.call(this.yAxis().bind(this)(this.y.get(l))),c.attr("transform",n=>`translate(${this.x0(n[0])}, 0)`),S.attr("x",n=>this.x1(n[0])).attr("width",this.x1.bandwidth()),C.attr("x",n=>this.x1(n[0])+this.x1.bandwidth()/2)};x(),d(window).on(`resize.${i}`,x)})}}const B=async()=>{const o=L(b,t=>Object.fromEntries(t.map(({Comfort:i,Percent:e})=>[i,e])),t=>t.Politics),s=V().domain(new Set(b.map(t=>t.Comfort))).range(["MediumSeaGreen","lightgreen","pink","LightCoral"]);d("figure").append("svg").datum(o).call(z(new Y().height(500).color(s).xScale(y().domain([0,100])).label(t=>`${t[1]}%`)))};window.onresize=()=>{};window.onload=()=>{const o=new O.Child({polling:500});o.sendHeight(),o.onMessage("download",$),G(),B()};
