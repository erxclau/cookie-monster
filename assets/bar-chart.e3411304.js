import"./modulepreload-polyfill.c7c6310f.js";/* empty css             */import"./graphic.b50f7b1c.js";import{p as A}from"./pym.v1.e4649dc4.js";import{s as d,d as v}from"./download-image.15bf44c5.js";import{V as z,s as C,r as R,b as k}from"./set-display.8240a882.js";import{d as W}from"./2022-state.87e34ceb.js";import{b as L,o as O}from"./band.da707044.js";import{s as $}from"./color.467d371f.js";import{w as j}from"./wrap.168604d1.js";import{x as D,a as M,l as T,b as V,m as X}from"./axis.be3035b7.js";import"./util.82aea728.js";class Y extends z{constructor(){super(),this.height(150),this.margin({top:20,right:20,bottom:20,left:20}),this.color("steelblue"),this.label(t=>t[1]),this.resize(!0),this.redraw(!1),this.wrappx(50),this.xAxis(D),this.yAxis(function(t){return s=>{this.getSelectionWithRedrawContext(s).call(M(t).tickSize(0))}}),this.x=T(),this.y=null}bar(t){return t.attr("class","bar").attr("y",s=>this.y(s[0])).attr("height",this.y.bandwidth()).attr("fill",this.color())}barLabel(t){return t.attr("class","label").attr("dx","0.25em").attr("y",s=>this.y(s[0])+this.y.bandwidth()/2).text(this.label())}defaultXScale(t){return V().domain([0,X(t.values())]).nice()}defaultYScale(t){return L().domain(t.keys()).padding(.25)}draw(t){return t.each((s,i,b)=>{var x,g;const{top:m,right:w,bottom:f}=this.margin();let{left:o}=this.margin();const n=b[i];this.x.set(n,(x=this.xScale())!=null?x:this.defaultXScale(s)),this.y=(g=this.yScale())!=null?g:this.defaultYScale(s),this.y.range([m,this.height()-f]);const r=d(n).attr("height",this.height()).attr("class","bar-chart");this.svg=r,this.appendOnce("g","y-axis").call(this.yAxis().bind(this)(this.y)).call(l=>{const a=l.selectAll(".tick text");o=j(a,this.wrappx())+5}).attr("transform",`translate(${o}, 0)`);const u=this.appendOnce("g","x-axis").attr("transform",`translate(0, ${m})`),y=r.selectAll(".bar").data(s).join("rect").call(this.bar.bind(this)),S=r.selectAll(".label").data(s).join("text").call(this.barLabel.bind(this)),p=()=>{const l=this.getResponsiveWidth();r.attr("width",l);const a=this.x.get(n).range([o,l-w]);u.call(this.xAxis().bind(this)(a));const h=a.domain()[0];this.getSelectionWithRedrawContext(y).attr("x",a(h)).attr("width",c=>a(c[1])-a(h)),this.getSelectionWithRedrawContext(S).attr("x",c=>a(c[1]))};p(),d(window).on(`resize.${i}`,p)}),this}}const B=()=>{const e=W.filter(i=>i["School Type"]==="District"),t=R(e,i=>i.length,i=>i["Overall Rating"]),s=O().domain(t.keys()).range($.slice(0,t.size));d("figure").append("svg").datum(t).call(k(new Y().wrappx(100).margin({left:50,right:50}).height(250).color(i=>s(i[0]))))};window.onresize=()=>{};window.onload=()=>{const e=new A.Child({polling:500});e.sendHeight(),e.onMessage("download",v),C(),B()};
